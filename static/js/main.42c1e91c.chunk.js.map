{"version":3,"sources":["common/Clickable.js","common/TextWithParagraphs.js","constants.js","utils.js","LegendModal.js","index.js"],"names":["Clickable","_ref","onClick","children","props","Object","objectWithoutProperties","react_default","a","createElement","assign","role","tabIndex","onKeyDown","event","key","TextWithParagraphs","paragraphs","text","split","lastParagraphIndex","length","map","paragraph","i","react","Fragment","LIGHT_STYLE","concat","MINSK","BELARUS_BOUNDS","PropTypes","shape","id","number","isRequired","title","string","coordinates","arrayOf","emoji","getGoogleMapsUrl","_ref2","slicedToArray","lng","lat","zoom","arguments","undefined","track","_ref3","action","label","_window","window","gtag","ga","_ga$getAll","getAll","tracker","console","log","send","event_category","event_label","LegendModal","_ref$legend","legend","emojiCode","onClose","className","src","alt","href","rel","target","bind","formatcoords","format","latLonSeparator","decimalPlaces","common_TextWithParagraphs","Map","ReactMapboxGl","accessToken","minZoom","maxZoom","App","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleZoom","state","nextZoom","Math","round","getZoom","setState","setActiveLegendId","activeLegendId","legendsById","keyBy","legends","_this2","_this$state","activeLegend","style","containerStyle","position","top","bottom","width","fitBounds","fitBoundsOptions","padding","center","onZoom","lib_esm","zIndex","filter","common_Clickable","src_LegendModal","Component","rootElement","document","getElementById","ReactDOM","render","src_App","require"],"mappings":"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","file":"static/js/main.42c1e91c.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Clickable = ({ onClick, children, ...props }) => (\n  <div\n    role=\"button\"\n    tabIndex={0}\n    onClick={onClick}\n    onKeyDown={event => {\n      if (event.key === 'Enter') {\n        onClick(event);\n      }\n    }}\n    {...props}\n  >\n    {children}\n  </div>\n);\n\nClickable.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Clickable;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\n\nconst TextWithParagraphs = ({ text }) => {\n  const paragraphs = text.split('\\n');\n  const lastParagraphIndex = paragraphs.length - 1;\n\n  return paragraphs.map((paragraph, i) => (\n    <Fragment key={i}>\n      {paragraph}\n      {i < lastParagraphIndex && (\n        <>\n          <br />\n          <br />\n        </>\n      )}\n    </Fragment>\n  ));\n};\n\nTextWithParagraphs.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default TextWithParagraphs;\n","import PropTypes from 'prop-types';\n\nexport const MAPBOX_ACCESS_TOKEN =\n  'pk.eyJ1IjoidWxhZGJvaGRhbiIsImEiOiJjam9kMDQ1NzYxOTYyM3FvanhpOXE1cDIzIn0.JiXb8lR9e53GqZz51PZdaQ';\n\nexport const GA_ID = {\n  staging: 'UA-117143376-4',\n  production: 'UA-117143376-3',\n};\n\nconst STYLE_PREFIX = 'mapbox://styles/uladbohdan';\n\nexport const LIGHT_STYLE = `${STYLE_PREFIX}/cjpjxmip00js22snnkwi85d4i`;\n\nexport const MINSK = [27.5615, 53.9045];\n\nexport const BELARUS_BOUNDS = [\n  23.178357, // west\n  51.261881, // south\n  32.776784, // east\n  56.139922, // north\n];\n\nexport const EMOJI_SCALE_RATE = 4.5;\n\nexport const LegendShape = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  coordinates: PropTypes.arrayOf(PropTypes.number).isRequired,\n  text: PropTypes.string.isRequired,\n  emoji: PropTypes.string.isRequired,\n});\n","export const getGoogleMapsUrl = ([lng, lat], zoom = 7) =>\n  `http://www.google.com/maps/place/${lat},${lng}/@${lat},${lng},${zoom}z`;\n\nexport const track = ({ action, label }) => {\n  const { gtag, ga } = window;\n  if (!gtag) {\n    return;\n  }\n  const [tracker] = ga.getAll();\n  console.log('tracker: ', tracker);\n  if (tracker) {\n    tracker.send('event', 'Test', 'Test GA');\n  }\n  gtag('event', action, {\n    event_category: 'Legends Map',\n    event_label: label,\n  });\n};\n","import React from 'react';\nimport formatcoords from 'formatcoords';\n\nimport TextWithParagraphs from './common/TextWithParagraphs';\n\nimport { LegendShape } from './constants';\nimport { getGoogleMapsUrl, track } from './utils';\n\nconst LegendModal = ({ legend: { emoji, emojiCode, coordinates, title, text }, onClose }) => (\n  <div className=\"legend__modal\">\n    <div className=\"legend__content\">\n      <div className=\"legend__top\">\n        <img className=\"legend__emoji\" src={`./images/${emojiCode}.png`} alt={title} />\n        <div className=\"legend__coords\">\n          <a\n            className=\"legend__coords_link\"\n            href={getGoogleMapsUrl(coordinates)}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            onClick={track.bind(null, { action: 'google-map-opened', label: `${emoji} ${title}` })}\n          >\n            {formatcoords(coordinates, true).format('DD MM X', {\n              latLonSeparator: ', ',\n              decimalPlaces: 2,\n            })}\n          </a>\n        </div>\n        <div className=\"legend__title\">{title}</div>\n      </div>\n      <div className=\"legend__text\">\n        <TextWithParagraphs text={text} />\n      </div>\n      <button className=\"legend__close-button\" onClick={onClose}>\n        <i className=\"legend__close-icon fa fa-times\" />\n      </button>\n    </div>\n  </div>\n);\n\nLegendModal.propTypes = {\n  legend: LegendShape.isRequired,\n};\n\nexport default LegendModal;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ReactMapboxGl, { Marker, ZoomControl } from 'react-mapbox-gl';\nimport keyBy from 'lodash/keyBy';\n\nimport Clickable from './common/Clickable';\nimport LegendModal from './LegendModal';\n\nimport { track } from './utils';\n\nimport {\n  MAPBOX_ACCESS_TOKEN,\n  GA_ID,\n  LIGHT_STYLE,\n  MINSK,\n  BELARUS_BOUNDS,\n  EMOJI_SCALE_RATE,\n  LegendShape,\n} from './constants';\nimport './styles.scss';\n\nconst Map = ReactMapboxGl({\n  accessToken: MAPBOX_ACCESS_TOKEN,\n  minZoom: 4,\n  maxZoom: 9,\n});\n\n// NOTE: When rendering many objects,\n// avoid using `Markers` as it will negatively affect performance.\n// Use `Layers` and `Features` instead.\n// https://github.com/alex3165/react-mapbox-gl/blob/master/docs/API.md#marker\n\nclass App extends Component {\n  static propTypes = {\n    legends: PropTypes.arrayOf(LegendShape).isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.legendsById = keyBy(this.props.legends, 'id');\n    this.state = { activeLegendId: null };\n  }\n\n  handleZoom = map => {\n    const { zoom } = this.state;\n    const nextZoom = Math.round(map.getZoom());\n    if (nextZoom !== zoom) {\n      this.setState({ zoom: nextZoom });\n    }\n  };\n\n  setActiveLegendId = activeLegendId => this.setState({ activeLegendId });\n\n  render() {\n    const { legends } = this.props;\n    const { activeLegendId, zoom } = this.state;\n    const activeLegend = this.legendsById[activeLegendId];\n    return (\n      <>\n        <Map\n          style={LIGHT_STYLE}\n          containerStyle={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            width: '100%',\n          }}\n          // TODO: fix calling `fitBounds` on window resizing\n          fitBounds={BELARUS_BOUNDS}\n          fitBoundsOptions={{\n            padding: 25,\n          }}\n          center={MINSK}\n          onZoom={this.handleZoom}\n        >\n          <ZoomControl style={{ zIndex: 1 }} />\n          {legends\n            .filter(({ emoji }) => emoji)\n            .map(({ id, title, coordinates, emoji, emojiCode }) => (\n              <Marker key={id} coordinates={coordinates}>\n                <Clickable\n                  onClick={() => {\n                    track({ action: 'emoji-clicked', label: `${emoji} ${title}` });\n                    // this.setState({ activeLegendId: id });\n                  }}\n                >\n                  <img\n                    alt={emoji}\n                    src={`./images/${emojiCode}.png`}\n                    width={zoom * EMOJI_SCALE_RATE}\n                  />\n                </Clickable>\n              </Marker>\n            ))}\n        </Map>\n        {activeLegend && (\n          <LegendModal legend={activeLegend} onClose={() => this.setActiveLegendId(null)} />\n        )}\n        <div className=\"title title__map\">\n          Мапа <br /> беларускіх <br /> легенд\n        </div>\n        <div className=\"title title__wir-reference\">\n          Зроблена для <br /> пляцоўкі{' '}\n          <a href=\"http://wir.by\" target=\"_blank\" rel=\"noreferrer noopener\">\n            wir.by\n          </a>\n        </div>\n      </>\n    );\n  }\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App legends={require('./legends')} />, rootElement);\n"],"sourceRoot":""}
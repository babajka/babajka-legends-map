{"version":3,"sources":["common/Clickable.js","common/TextWithParagraphs.js","constants.js","utils.js","LegendModal.js","index.js"],"names":["Clickable","_ref","onClick","children","props","Object","objectWithoutProperties","react_default","a","createElement","assign","role","tabIndex","onKeyDown","event","key","TextWithParagraphs","paragraphs","text","split","lastParagraphIndex","length","map","paragraph","i","react","Fragment","LIGHT_STYLE","concat","MINSK","BELARUS_BOUNDS","PropTypes","shape","id","number","isRequired","title","string","coordinates","arrayOf","emoji","getGoogleMapsUrl","_ref2","slicedToArray","lng","lat","zoom","arguments","undefined","track","options","ga","window","console","log","objectSpread","hitType","eventCategory","LegendModal","_ref$legend","legend","emojiCode","onClose","className","src","alt","href","rel","target","bind","action","label","formatcoords","format","latLonSeparator","decimalPlaces","common_TextWithParagraphs","Map","ReactMapboxGl","accessToken","minZoom","maxZoom","App","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleZoom","state","nextZoom","Math","round","getZoom","setState","setActiveLegendId","activeLegendId","legendsById","keyBy","legends","_this2","_this$state","activeLegend","style","containerStyle","position","top","bottom","width","fitBounds","fitBoundsOptions","padding","center","onZoom","lib_esm","zIndex","filter","common_Clickable","eventAction","eventLabel","src_LegendModal","Component","rootElement","document","getElementById","ReactDOM","render","src_App","require"],"mappings":"yvsJAwBeA,EArBG,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,QAASC,EAAZF,EAAYE,SAAaC,EAAzBC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,+BAChBM,EAAAC,EAAAC,cAAA,MAAAJ,OAAAK,OAAA,CACEC,KAAK,SACLC,SAAU,EACVV,QAASA,EACTW,UAAW,SAAAC,GACS,UAAdA,EAAMC,KACRb,EAAQY,KAGRV,GAEHD,qBCSUa,EArBY,SAAAf,GAAc,IACjCgB,EADiChB,EAAXiB,KACJC,MAAM,MACxBC,EAAqBH,EAAWI,OAAS,EAE/C,OAAOJ,EAAWK,IAAI,SAACC,EAAWC,GAAZ,OACpBjB,EAAAC,EAAAC,cAACgB,EAAA,SAAD,CAAUV,IAAKS,GACZD,EACAC,EAAIJ,GACHb,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkB,SAAA,KACEnB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,gCCDGkB,EAAW,GAAAC,OAFH,6BAEG,8BAEXC,EAAQ,CAAC,QAAS,SAElBC,EAAiB,CAC5B,UACA,UACA,UACA,cAKyBC,IAAUC,MAAM,CACzCC,GAAIF,IAAUG,OAAOC,WACrBC,MAAOL,IAAUM,OAAOF,WACxBG,YAAaP,IAAUQ,QAAQR,IAAUG,QAAQC,WACjDjB,KAAMa,IAAUM,OAAOF,WACvBK,MAAOT,IAAUM,OAAOF,4BC9BbM,EAAmB,SAAAxC,GAAA,IAAAyC,EAAArC,OAAAsC,EAAA,EAAAtC,CAAAJ,EAAA,GAAE2C,EAAFF,EAAA,GAAOG,EAAPH,EAAA,GAAaI,EAAbC,UAAA1B,OAAA,QAAA2B,IAAAD,UAAA,GAAAA,UAAA,GAAoB,EAApB,0CAAAnB,OACMiB,EADN,KAAAjB,OACagB,EADb,MAAAhB,OACqBiB,EADrB,KAAAjB,OAC4BgB,EAD5B,KAAAhB,OACmCkB,EADnC,MAGnBG,EAAQ,SAAAC,GAAW,IACtBC,EAAOC,OAAPD,GACRE,QAAQC,IAAI,UAAWH,GAClBA,GAGLA,EAAG,OAAD9C,OAAAkD,EAAA,EAAAlD,CAAA,CACAmD,QAAS,QACTC,cAAe,eACZP,KC+BQQ,EAnCK,SAAAzD,GAAA,IAAA0D,EAAA1D,EAAG2D,OAAUpB,EAAbmB,EAAanB,MAAOqB,EAApBF,EAAoBE,UAAWvB,EAA/BqB,EAA+BrB,YAAaF,EAA5CuB,EAA4CvB,MAAOlB,EAAnDyC,EAAmDzC,KAAQ4C,EAA3D7D,EAA2D6D,QAA3D,OAClBvD,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,iBACbxD,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,mBACbxD,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,eACbxD,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,gBAAgBC,IAAG,YAAApC,OAAciC,EAAd,QAA+BI,IAAK7B,IACtE7B,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,kBACbxD,EAAAC,EAAAC,cAAA,KACEsD,UAAU,sBACVG,KAAMzB,EAAiBH,GACvB6B,IAAI,sBACJC,OAAO,SACPlE,QAAS+C,EAAMoB,KAAK,KAAM,CAAEC,OAAQ,oBAAqBC,MAAK,GAAA3C,OAAKY,EAAL,KAAAZ,OAAcQ,MAE3EoC,IAAalC,GAAa,GAAMmC,OAAO,UAAW,CACjDC,gBAAiB,KACjBC,cAAe,MAIrBpE,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,iBAAiB3B,IAElC7B,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,gBACbxD,EAAAC,EAAAC,cAACmE,EAAD,CAAoB1D,KAAMA,KAE5BX,EAAAC,EAAAC,cAAA,UAAQsD,UAAU,uBAAuB7D,QAAS4D,GAChDvD,EAAAC,EAAAC,cAAA,KAAGsD,UAAU,uCCXfc,UAAMC,YAAc,CACxBC,YHpBA,gGGqBAC,QAAS,EACTC,QAAS,KAQLC,cAKJ,SAAAA,EAAY9E,GAAO,IAAA+E,EAAA,OAAA9E,OAAA+E,EAAA,EAAA/E,CAAAgF,KAAAH,IACjBC,EAAA9E,OAAAiF,EAAA,EAAAjF,CAAAgF,KAAAhF,OAAAkF,EAAA,EAAAlF,CAAA6E,GAAAM,KAAAH,KAAMjF,KAKRqF,WAAa,SAAAnE,GAAO,IACVwB,EAASqC,EAAKO,MAAd5C,KACF6C,EAAWC,KAAKC,MAAMvE,EAAIwE,WAC5BH,IAAa7C,GACfqC,EAAKY,SAAS,CAAEjD,KAAM6C,KAVPR,EAcnBa,kBAAoB,SAAAC,GAAc,OAAId,EAAKY,SAAS,CAAEE,oBAZpDd,EAAKe,YAAcC,IAAMhB,EAAK/E,MAAMgG,QAAS,MAC7CjB,EAAKO,MAAQ,CAAEO,eAAgB,MAHdd,wEAgBV,IAAAkB,EAAAhB,KACCe,EAAYf,KAAKjF,MAAjBgG,QADDE,EAE0BjB,KAAKK,MAA9BO,EAFDK,EAECL,eAAgBnD,EAFjBwD,EAEiBxD,KAClByD,EAAelB,KAAKa,YAAYD,GACtC,OACE1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAkB,SAAA,KACEnB,EAAAC,EAAAC,cAACoE,EAAD,CACE2B,MAAO7E,EACP8E,eAAgB,CACdC,SAAU,WACVC,IAAK,EACLC,OAAQ,EACRC,MAAO,QAGTC,UAAWhF,EACXiF,iBAAkB,CAChBC,QAAS,IAEXC,OAAQpF,EACRqF,OAAQ7B,KAAKI,YAEblF,EAAAC,EAAAC,cAAC0G,EAAA,EAAD,CAAaX,MAAO,CAAEY,OAAQ,KAC7BhB,EACEiB,OAAO,SAAApH,GAAA,OAAAA,EAAGuC,QACVlB,IAAI,SAAAoB,GAAA,IAAGT,EAAHS,EAAGT,GAAIG,EAAPM,EAAON,MAAOE,EAAdI,EAAcJ,YAAaE,EAA3BE,EAA2BF,MAAOqB,EAAlCnB,EAAkCmB,UAAlC,OACHtD,EAAAC,EAAAC,cAAC0G,EAAA,EAAD,CAAQpG,IAAKkB,EAAIK,YAAaA,GAC5B/B,EAAAC,EAAAC,cAAC6G,EAAD,CACEpH,QAAS,WACP+C,EAAM,CAAEsE,YAAa,gBAAiBC,WAAU,GAAA5F,OAAKY,EAAL,KAAAZ,OAAcQ,KAC9DiE,EAAKN,SAAS,CAAEE,eAAgBhE,MAGlC1B,EAAAC,EAAAC,cAAA,OACEwD,IAAKzB,EACLwB,IAAG,YAAApC,OAAciC,EAAd,QACHgD,MHnEY,IGmEL/D,SAMlByD,GACChG,EAAAC,EAAAC,cAACgH,EAAD,CAAa7D,OAAQ2C,EAAczC,QAAS,kBAAMuC,EAAKL,kBAAkB,SAE3EzF,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,oBAAf,4BACOxD,EAAAC,EAAAC,cAAA,WADP,iEACyBF,EAAAC,EAAAC,cAAA,WADzB,yCAGAF,EAAAC,EAAAC,cAAA,OAAKsD,UAAU,8BAAf,uEACexD,EAAAC,EAAAC,cAAA,WADf,oDAC+B,IAC7BF,EAAAC,EAAAC,cAAA,KAAGyD,KAAK,gBAAgBE,OAAO,SAASD,IAAI,uBAA5C,mBAvEQuD,aAgFZC,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OAAOxH,EAAAC,EAAAC,cAACuH,EAAD,CAAK5B,QAAS6B,EAAQ,OAAkBN","file":"static/js/main.4ce8008c.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Clickable = ({ onClick, children, ...props }) => (\n  <div\n    role=\"button\"\n    tabIndex={0}\n    onClick={onClick}\n    onKeyDown={event => {\n      if (event.key === 'Enter') {\n        onClick(event);\n      }\n    }}\n    {...props}\n  >\n    {children}\n  </div>\n);\n\nClickable.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Clickable;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\n\nconst TextWithParagraphs = ({ text }) => {\n  const paragraphs = text.split('\\n');\n  const lastParagraphIndex = paragraphs.length - 1;\n\n  return paragraphs.map((paragraph, i) => (\n    <Fragment key={i}>\n      {paragraph}\n      {i < lastParagraphIndex && (\n        <>\n          <br />\n          <br />\n        </>\n      )}\n    </Fragment>\n  ));\n};\n\nTextWithParagraphs.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default TextWithParagraphs;\n","import PropTypes from 'prop-types';\n\nexport const MAPBOX_ACCESS_TOKEN =\n  'pk.eyJ1IjoidWxhZGJvaGRhbiIsImEiOiJjam9kMDQ1NzYxOTYyM3FvanhpOXE1cDIzIn0.JiXb8lR9e53GqZz51PZdaQ';\n\nexport const GA_ID = {\n  staging: 'UA-117143376-4',\n  production: 'UA-117143376-3',\n};\n\nconst STYLE_PREFIX = 'mapbox://styles/uladbohdan';\n\nexport const LIGHT_STYLE = `${STYLE_PREFIX}/cjpjxmip00js22snnkwi85d4i`;\n\nexport const MINSK = [27.5615, 53.9045];\n\nexport const BELARUS_BOUNDS = [\n  23.178357, // west\n  51.261881, // south\n  32.776784, // east\n  56.139922, // north\n];\n\nexport const EMOJI_SCALE_RATE = 4.5;\n\nexport const LegendShape = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  coordinates: PropTypes.arrayOf(PropTypes.number).isRequired,\n  text: PropTypes.string.isRequired,\n  emoji: PropTypes.string.isRequired,\n});\n","export const getGoogleMapsUrl = ([lng, lat], zoom = 7) =>\n  `http://www.google.com/maps/place/${lat},${lng}/@${lat},${lng},${zoom}z`;\n\nexport const track = options => {\n  const { ga } = window;\n  console.log('track: ', ga);\n  if (!ga) {\n    return;\n  }\n  ga('send', {\n    hitType: 'event',\n    eventCategory: 'Legends Map',\n    ...options,\n  });\n};\n","import React from 'react';\nimport formatcoords from 'formatcoords';\n\nimport TextWithParagraphs from './common/TextWithParagraphs';\n\nimport { LegendShape } from './constants';\nimport { getGoogleMapsUrl, track } from './utils';\n\nconst LegendModal = ({ legend: { emoji, emojiCode, coordinates, title, text }, onClose }) => (\n  <div className=\"legend__modal\">\n    <div className=\"legend__content\">\n      <div className=\"legend__top\">\n        <img className=\"legend__emoji\" src={`./images/${emojiCode}.png`} alt={title} />\n        <div className=\"legend__coords\">\n          <a\n            className=\"legend__coords_link\"\n            href={getGoogleMapsUrl(coordinates)}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            onClick={track.bind(null, { action: 'google-map-opened', label: `${emoji} ${title}` })}\n          >\n            {formatcoords(coordinates, true).format('DD MM X', {\n              latLonSeparator: ', ',\n              decimalPlaces: 2,\n            })}\n          </a>\n        </div>\n        <div className=\"legend__title\">{title}</div>\n      </div>\n      <div className=\"legend__text\">\n        <TextWithParagraphs text={text} />\n      </div>\n      <button className=\"legend__close-button\" onClick={onClose}>\n        <i className=\"legend__close-icon fa fa-times\" />\n      </button>\n    </div>\n  </div>\n);\n\nLegendModal.propTypes = {\n  legend: LegendShape.isRequired,\n};\n\nexport default LegendModal;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ReactMapboxGl, { Marker, ZoomControl } from 'react-mapbox-gl';\nimport keyBy from 'lodash/keyBy';\n\nimport Clickable from './common/Clickable';\nimport LegendModal from './LegendModal';\n\nimport { track } from './utils';\n\nimport {\n  MAPBOX_ACCESS_TOKEN,\n  GA_ID,\n  LIGHT_STYLE,\n  MINSK,\n  BELARUS_BOUNDS,\n  EMOJI_SCALE_RATE,\n  LegendShape,\n} from './constants';\nimport './styles.scss';\n\nconst Map = ReactMapboxGl({\n  accessToken: MAPBOX_ACCESS_TOKEN,\n  minZoom: 4,\n  maxZoom: 9,\n});\n\n// NOTE: When rendering many objects,\n// avoid using `Markers` as it will negatively affect performance.\n// Use `Layers` and `Features` instead.\n// https://github.com/alex3165/react-mapbox-gl/blob/master/docs/API.md#marker\n\nclass App extends Component {\n  static propTypes = {\n    legends: PropTypes.arrayOf(LegendShape).isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.legendsById = keyBy(this.props.legends, 'id');\n    this.state = { activeLegendId: null };\n  }\n\n  handleZoom = map => {\n    const { zoom } = this.state;\n    const nextZoom = Math.round(map.getZoom());\n    if (nextZoom !== zoom) {\n      this.setState({ zoom: nextZoom });\n    }\n  };\n\n  setActiveLegendId = activeLegendId => this.setState({ activeLegendId });\n\n  render() {\n    const { legends } = this.props;\n    const { activeLegendId, zoom } = this.state;\n    const activeLegend = this.legendsById[activeLegendId];\n    return (\n      <>\n        <Map\n          style={LIGHT_STYLE}\n          containerStyle={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            width: '100%',\n          }}\n          // TODO: fix calling `fitBounds` on window resizing\n          fitBounds={BELARUS_BOUNDS}\n          fitBoundsOptions={{\n            padding: 25,\n          }}\n          center={MINSK}\n          onZoom={this.handleZoom}\n        >\n          <ZoomControl style={{ zIndex: 1 }} />\n          {legends\n            .filter(({ emoji }) => emoji)\n            .map(({ id, title, coordinates, emoji, emojiCode }) => (\n              <Marker key={id} coordinates={coordinates}>\n                <Clickable\n                  onClick={() => {\n                    track({ eventAction: 'emoji-clicked', eventLabel: `${emoji} ${title}` });\n                    this.setState({ activeLegendId: id });\n                  }}\n                >\n                  <img\n                    alt={emoji}\n                    src={`./images/${emojiCode}.png`}\n                    width={zoom * EMOJI_SCALE_RATE}\n                  />\n                </Clickable>\n              </Marker>\n            ))}\n        </Map>\n        {activeLegend && (\n          <LegendModal legend={activeLegend} onClose={() => this.setActiveLegendId(null)} />\n        )}\n        <div className=\"title title__map\">\n          Мапа <br /> беларускіх <br /> легенд\n        </div>\n        <div className=\"title title__wir-reference\">\n          Зроблена для <br /> пляцоўкі{' '}\n          <a href=\"http://wir.by\" target=\"_blank\" rel=\"noreferrer noopener\">\n            wir.by\n          </a>\n        </div>\n      </>\n    );\n  }\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App legends={require('./legends')} />, rootElement);\n"],"sourceRoot":""}
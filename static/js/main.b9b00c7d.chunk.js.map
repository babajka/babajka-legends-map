{"version":3,"sources":["utils.js","constants.js","components/GA.js","components/common/Clickable.js","components/Title.js","components/common/StopClickPropagation.js","components/Wir.js","components/common/OnEscape.js","components/common/TextWithParagraphs.js","components/CrossSvgIcon.js","components/LegendModal.js","components/Map.js","index.js"],"names":["getGoogleMapsUrl","_ref","_ref2","Object","slicedToArray","lng","lat","zoom","arguments","length","undefined","concat","track","options","ReactGA","event","objectSpread","category","isDesktopDevice","window","innerHeight","innerWidth","clearUtmParams","_window","location","history","search","indexOf","replaceState","toString","replace","GA_ID","LIGHT_STYLE","MINSK","BELARUS_BOUNDS","zIndexElements","PropTypes","shape","id","number","isRequired","title","string","coordinates","arrayOf","text","emoji","_len","constants","Array","_key","reduce","acc","constant","createConstants","zIndexes","MAP","MARKER","CONTROLS","LABELS","LEGENDS_MODAL","cur","index","GA","initialize","debug","process","ga","pathname","hitCallback","this","props","children","Component","Clickable","onClick","objectWithoutProperties","react_default","a","createElement","assign","role","tabIndex","onKeyDown","key","Title","className","style","zIndex","StopClickPropagation","handleStopPropagation","stopPropagation","_this$props","tag","React","defaultProps","Wir","src","alt","common_StopClickPropagation","href","target","rel","OnEscape","handleKeyDown","action","_this","addEventListener","removeEventListener","TextWithParagraphs","paragraphs","split","lastParagraphIndex","map","paragraph","i","react","Fragment","CrossSvgIcon","viewBox","width","height","fill","d","LegendModal","_ref$legend","legend","emojiCode","onClose","common_Clickable","components_Title","components_Wir","label","formatcoords","format","latLonSeparator","decimalPlaces","common_TextWithParagraphs","type","autoFocus","components_CrossSvgIcon","OnEscape_OnEscape","Mapbox","ReactMapboxGl","accessToken","logoPosition","minZoom","maxZoom","getFitBoundsOptions","padding","left","rightShift","top","topShift","bottom","right","Map","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleZoom","state","nextZoom","Math","round","getZoom","setState","calculateShifts","activeLegendId","resizeMap","resize","fitBounds","setActiveLegendId","legendsById","keyBy","legends","_this2","_this$state","activeLegend","containerStyle","position","fitBoundsOptions","center","onZoom","onSourceDataLoading","lib_esm","filter","_ref3","_ref4","currentTarget","blur","components_LegendModal","rootElement","document","getElementById","ReactDOM","render","components_GA","components_Map"],"mappings":"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","file":"static/js/main.b9b00c7d.chunk.js","sourcesContent":["import ReactGA from 'react-ga';\n\nexport const getGoogleMapsUrl = ([lng, lat], zoom = 7) =>\n  `http://www.google.com/maps/place/${lat},${lng}/@${lat},${lng},${zoom}z`;\n\nexport const track = options => {\n  if (!process.env.REACT_APP_WIR_ENV) {\n    return;\n  }\n  ReactGA.event({\n    category: 'Legends Map',\n    ...options,\n  });\n};\n\nexport const createConstants = (...constants) =>\n  constants.reduce((acc, constant) => {\n    acc[constant] = constant;\n    return acc;\n  }, {});\n\nexport const isDesktopDevice = () => window.innerHeight < window.innerWidth;\n\nexport const clearUtmParams = () => {\n  const { location, history } = window;\n  const isUtmsInQuery = location.search.indexOf('utm_') !== -1;\n  if (isUtmsInQuery && history.replaceState) {\n    history.replaceState({}, '', location.toString().replace(/(&|\\?)utm([_a-z0-9=]+)/g, ''));\n  }\n};\n","import PropTypes from 'prop-types';\n\nimport { createConstants } from './utils';\n\nexport const MAPBOX_ACCESS_TOKEN =\n  'pk.eyJ1IjoidWxhZGJvaGRhbiIsImEiOiJjam9kMDQ1NzYxOTYyM3FvanhpOXE1cDIzIn0.JiXb8lR9e53GqZz51PZdaQ';\n\nexport const GA_ID = {\n  staging: 'UA-117143376-4',\n  production: 'UA-117143376-3',\n};\n\nconst STYLE_PREFIX = 'mapbox://styles/uladbohdan';\n\nexport const LIGHT_STYLE = `${STYLE_PREFIX}/cjpjxmip00js22snnkwi85d4i`;\n\nexport const MINSK = [27.5615, 53.9045];\n\nexport const BELARUS_BOUNDS = [\n  23.178357, // west\n  51.261881, // south\n  32.776784, // east\n  56.139922, // north\n];\n\nexport const EMOJI_SCALE_RATE = 4.5;\n\nexport const LegendShape = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  coordinates: PropTypes.arrayOf(PropTypes.number).isRequired,\n  text: PropTypes.string.isRequired,\n  emoji: PropTypes.string.isRequired,\n});\n\nexport const zIndexElements = createConstants(\n  'MAP',\n  'MARKER',\n  'CONTROLS',\n  'LABELS',\n  'LEGENDS_MODAL'\n);\n\nexport const zIndexes = [\n  zIndexElements.MAP,\n  zIndexElements.MARKER,\n  zIndexElements.CONTROLS,\n  zIndexElements.LABELS,\n  zIndexElements.LEGENDS_MODAL,\n].reduce((acc, cur, index) => {\n  acc[cur] = index;\n  return acc;\n}, {});\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactGA from 'react-ga';\n\nimport { GA_ID } from '../constants';\nimport { clearUtmParams } from '../utils';\n\nclass GA extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n  };\n\n  componentDidMount() {\n    if (process.env.REACT_APP_WIR_ENV) {\n      ReactGA.initialize(GA_ID[process.env.REACT_APP_WIR_ENV], {\n        debug: process.env.REACT_APP_WIR_ENV !== 'production',\n      });\n      ReactGA.ga('send', 'pageview', window.location.pathname, {\n        hitCallback: clearUtmParams,\n      });\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n\nexport default GA;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Clickable = ({ onClick, children, ...props }) => (\n  <div\n    role=\"button\"\n    tabIndex={0}\n    onClick={onClick}\n    onKeyDown={event => {\n      if (event.key === 'Enter') {\n        onClick(event);\n      }\n    }}\n    {...props}\n  >\n    {children}\n  </div>\n);\n\nClickable.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Clickable;\n","import React from 'react';\n\nimport { zIndexes, zIndexElements } from '../constants';\n\nconst Title = () => (\n  <div className=\"title\" style={{ zIndex: zIndexes[zIndexElements.LABELS] }}>\n    Мапа\n    <br />\n    беларускіх\n    <br />\n    легенд\n  </div>\n);\n\nexport default Title;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass StopClickPropagation extends Component {\n  static propTypes = {\n    tag: PropTypes.string,\n    className: PropTypes.string,\n    children: PropTypes.node.isRequired,\n  };\n\n  static defaultProps = {\n    tag: 'div',\n    className: '',\n  };\n\n  handleStopPropagation = event => {\n    event.stopPropagation();\n  };\n\n  render() {\n    const { tag, className, children } = this.props;\n\n    return React.createElement(\n      tag,\n      {\n        className,\n        onClick: this.handleStopPropagation,\n      },\n      children\n    );\n  }\n}\n\nexport default StopClickPropagation;\n","import React from 'react';\n\nimport StopClickPropagation from './common/StopClickPropagation';\nimport { zIndexes, zIndexElements } from '../constants';\n\nconst Wir = () => (\n  <div className=\"wir\" style={{ zIndex: zIndexes[zIndexElements.LABELS] }}>\n    <img className=\"wir__logo\" src=\"./favicon.png\" alt=\"Wir.by\" />\n    <StopClickPropagation>\n      зроблена камандай\n      <a\n        className=\"wir__link\"\n        href=\"http://wir.by?utm_source=map\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        wir.by\n      </a>\n    </StopClickPropagation>\n  </div>\n);\n\nexport default Wir;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class OnEscape extends Component {\n  static propTypes = {\n    action: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = ({ key }) => {\n    const { action } = this.props;\n    if (key === 'Escape') {\n      action();\n    }\n  };\n\n  render() {\n    return null;\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\n\nconst TextWithParagraphs = ({ text }) => {\n  const paragraphs = text.split('\\n');\n  const lastParagraphIndex = paragraphs.length - 1;\n\n  return paragraphs.map((paragraph, i) => (\n    // eslint-disable-next-line react/no-array-index-key\n    <Fragment key={i}>\n      {paragraph}\n      {i < lastParagraphIndex && (\n        <>\n          <br />\n          <br />\n        </>\n      )}\n    </Fragment>\n  ));\n};\n\nTextWithParagraphs.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default TextWithParagraphs;\n","import React from 'react';\n\nconst CrossSvgIcon = props => (\n  <svg viewBox=\"0 0 31.112 31.112\" width=\"1em\" height=\"1em\" {...props}>\n    <path\n      fill=\"#1a9582\"\n      d=\"M31.112 1.414L29.698 0 15.556 14.142 1.414 0 0 1.414l14.142 14.142L0 29.698l1.414 1.414L15.556 16.97l14.142 14.142 1.414-1.414L16.97\n 15.556z\"\n    />\n  </svg>\n);\n\nexport default CrossSvgIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport formatcoords from 'formatcoords';\n\nimport OnEscape from './common/OnEscape';\nimport Clickable from './common/Clickable';\nimport TextWithParagraphs from './common/TextWithParagraphs';\nimport Title from './Title';\nimport Wir from './Wir';\nimport CrossSvgIcon from './CrossSvgIcon';\n\nimport { LegendShape, zIndexes, zIndexElements } from '../constants';\nimport { getGoogleMapsUrl, track } from '../utils';\n\nconst LegendModal = ({ legend: { emoji, emojiCode, coordinates, title, text }, onClose }) => (\n  <div className=\"legend__modal\" style={{ zIndex: zIndexes[zIndexElements.LEGENDS_MODAL] }}>\n    <div className=\"legend__content\">\n      <Clickable className=\"legend__left\" onClick={onClose}>\n        <Title />\n        <img className=\"legend__emoji\" src={`./images/${emojiCode}.png`} alt={title} />\n        <Wir />\n      </Clickable>\n      <div className=\"legend__right\">\n        <div className=\"legend__top\">\n          <div className=\"legend__emoji-wrapper\">\n            <img className=\"legend__emoji\" src={`./images/${emojiCode}.png`} alt={title} />\n          </div>\n          <a\n            href={getGoogleMapsUrl(coordinates)}\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            onClick={() => track({ action: 'google-map-opened', label: `${emoji} ${title}` })}\n          >\n            {formatcoords(coordinates, true).format('DD MM X', {\n              latLonSeparator: ', ',\n              decimalPlaces: 2,\n            })}\n          </a>\n          <div className=\"legend__title\">{title}</div>\n        </div>\n        <div className=\"legend__text\">\n          <TextWithParagraphs text={text} />\n        </div>\n      </div>\n      <button\n        type=\"button\"\n        className=\"legend__close-button\"\n        onClick={onClose}\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus=\"autofocus\"\n      >\n        <CrossSvgIcon className=\"legend__close-icon\" />\n      </button>\n      <OnEscape action={onClose} />\n    </div>\n  </div>\n);\n\nLegendModal.propTypes = {\n  legend: LegendShape.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default LegendModal;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactMapboxGl, { Marker, ZoomControl } from 'react-mapbox-gl';\nimport keyBy from 'lodash/keyBy';\n\nimport Clickable from './common/Clickable';\nimport Title from './Title';\nimport Wir from './Wir';\nimport LegendModal from './LegendModal';\n\nimport { track, isDesktopDevice } from '../utils';\n\nimport {\n  MAPBOX_ACCESS_TOKEN,\n  LIGHT_STYLE,\n  MINSK,\n  BELARUS_BOUNDS,\n  EMOJI_SCALE_RATE,\n  LegendShape,\n  zIndexes,\n  zIndexElements,\n} from '../constants';\n\nconst Mapbox = ReactMapboxGl({\n  accessToken: MAPBOX_ACCESS_TOKEN,\n  logoPosition: 'bottom-right',\n  minZoom: 4,\n  maxZoom: 6.5,\n});\n\n// NOTE: When rendering many objects,\n// avoid using `Markers` as it will negatively affect performance.\n// Use `Layers` and `Features` instead.\n// https://github.com/alex3165/react-mapbox-gl/blob/master/docs/API.md#marker\n\nconst getFitBoundsOptions = ({ rightShift, topShift }) => ({\n  padding: {\n    left: rightShift ? 250 : 25,\n    top: topShift ? 100 : 25,\n    bottom: 25,\n    right: 25,\n  },\n});\n\nclass Map extends Component {\n  static propTypes = {\n    legends: PropTypes.arrayOf(LegendShape).isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.legendsById = keyBy(props.legends, 'id');\n    this.state = { activeLegendId: null };\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resizeMap);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resizeMap);\n  }\n\n  handleZoom = map => {\n    const { zoom } = this.state;\n    const nextZoom = Math.round(map.getZoom());\n    if (nextZoom !== zoom) {\n      this.setState({ zoom: nextZoom });\n    }\n  };\n\n  calculateShifts = () => {\n    const { activeLegendId } = this.state;\n    return {\n      rightShift: isDesktopDevice() && !activeLegendId,\n      topShift: !isDesktopDevice(),\n    };\n  };\n\n  resizeMap = () => {\n    this.map.resize();\n    this.map.fitBounds(BELARUS_BOUNDS, getFitBoundsOptions(this.calculateShifts()));\n  };\n\n  setActiveLegendId = activeLegendId => this.setState({ activeLegendId }, this.resizeMap);\n\n  render() {\n    const { legends } = this.props;\n    const { activeLegendId, zoom } = this.state;\n    const activeLegend = this.legendsById[activeLegendId];\n    return (\n      <>\n        <Title />\n        <main>\n          <Mapbox\n            style={LIGHT_STYLE}\n            containerStyle={{\n              position: 'absolute',\n              top: activeLegendId ? 150 : 0,\n              bottom: 0,\n              width: activeLegendId ? '50%' : '100%',\n              zIndex: zIndexes[zIndexElements.MAP],\n            }}\n            fitBounds={BELARUS_BOUNDS}\n            fitBoundsOptions={getFitBoundsOptions(this.calculateShifts())}\n            center={MINSK}\n            onZoom={this.handleZoom}\n            // HACK: same `map` object\n            onSourceDataLoading={map => {\n              if (!this.map) {\n                this.map = map;\n              }\n            }}\n          >\n            {!activeLegendId && (\n              <ZoomControl style={{ zIndex: zIndexes[zIndexElements.CONTROLS] }} />\n            )}\n            {legends\n              .filter(({ id }) => !activeLegendId || id === activeLegendId)\n              .map(({ id, title, coordinates, emoji, emojiCode }) => (\n                <Marker\n                  key={id}\n                  coordinates={coordinates}\n                  style={{ zIndex: zIndexes[zIndexElements.MARKER] }}\n                >\n                  <Clickable\n                    className=\"legends__marker\"\n                    onClick={({ currentTarget }) => {\n                      // HACK: clear outline\n                      currentTarget.blur();\n                      track({ action: 'emoji-clicked', label: `${emoji} ${title}` });\n                      this.setActiveLegendId(id);\n                    }}\n                  >\n                    <img\n                      alt={emoji}\n                      src={`./images/${emojiCode}.png`}\n                      width={zoom * EMOJI_SCALE_RATE}\n                    />\n                  </Clickable>\n                </Marker>\n              ))}\n          </Mapbox>\n        </main>\n        <Wir />\n        {activeLegend && (\n          <LegendModal legend={activeLegend} onClose={() => this.setActiveLegendId(null)} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Map;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport GA from './components/GA';\nimport Map from './components/Map';\n\nimport './styles.scss';\nimport legends from './legends.json';\n\nconst App = () => (\n  <GA>\n    <Map legends={legends} />\n  </GA>\n);\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}